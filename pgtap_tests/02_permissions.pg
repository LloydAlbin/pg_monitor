\connect pgmonitor_db

-- Setup Test Variables
\set test_name 'permissions'
\set test_user 'grafana'
\set test_production_database 'pgmonitor_db'
\set plan 5

-- Install pgTAP, show diagnostics, and start common tests
--\ir ../common/diagnostic.sql
\i common/diagnostics.pg

SELECT diag('Has Schema Tests');
SELECT diag('=================================');
SELECT has_role(:'test_user'::name);

SELECT diag('Has Schema Tests');
SELECT diag('=================================');
SELECT has_schema('pgmonitor');
SELECT has_schema('tools');

SELECT diag('Schema Ownership Tests');
SELECT diag('=================================');
SELECT schema_owner_is ( 'pgmonitor', :'test_user'::name );
SELECT schema_owner_is ( 'tools', :'test_user'::name );
